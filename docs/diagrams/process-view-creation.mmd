sequenceDiagram
    participant Client
    participant Filter as FeatureFlagFilter
    participant FFS as FeatureFlagService
    participant Controller as TransactionController
    participant MA as MetricsAspect
    participant Service as CreateTransactionService
    participant Adapter as TransactionRepositoryAdapter
    participant DB as H2 Database
    
    Client->>Filter: POST /transactions
    Filter->>FFS: Check "create-transaction" flag
    FFS-->>Filter: Feature enabled
    Filter->>Controller: Forward request
    Controller->>MA: Track "transactions.created"
    Controller->>Service: create(transaction)
    Service->>Adapter: save(transaction)
    Adapter->>DB: INSERT transaction
    DB-->>Adapter: Transaction saved
    Adapter-->>Service: Transaction domain object
    Service-->>Controller: Transaction
    Controller-->>Filter: Transaction
    Filter-->>Client: HTTP 200 + Transaction

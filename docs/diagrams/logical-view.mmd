graph TB
    subgraph "Domain Layer"
        T[Transaction]
        TT[TransactionType]
        TRP[TransactionRepositoryPort]
    end
    
    subgraph "Application Layer"
        CTU[CreateTransactionUseCase]
        CTS[CreateTransactionService]
        GTU[GetAllTransactionsUseCase]
        GTS[GetAllTransactionsService]
        IRP[IdempotencyRepositoryPort]
    end
    
    subgraph "Infrastructure Layer"
        TC[TransactionController]
        IF[IdempotencyFilter]
        TRA[TransactionRepositoryAdapter]
        IMA[InMemoryIdempotencyAdapter]
        TE[TransactionEntity]
        TJR[TransactionJpaRepository]
    end
    
    subgraph "Configuration Layer"
        FFS[FeatureFlagService]
        FFSI[FeatureFlagServiceImpl]
        FFF[FeatureFlagFilter]
        MA[MetricsAspect]
        GEH[GlobalExceptionHandler]
    end
    
    %% Dependencies
    CTS --> TRP
    GTS --> TRP
    TC --> CTU
    TC --> GTU
    TRA --> TRP
    TRA --> TJR
    TRA --> TE
    IMA --> IRP
    
    %% Cross-cutting concerns
    FFF -.-> TC
    FFF --> FFS
    FFSI --> FFS
    IF --> IRP
    IF -.-> TC
    MA -.-> TC
    GEH -.-> TC
